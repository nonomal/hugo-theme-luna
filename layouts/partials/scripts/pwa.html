<!-- main.js -->
{{- $script := resources.Get "modules/sw.js" | js.Build (dict "minify" hugo.IsProduction "params" (dict "cdn" ($.Store.Get "public_cdn") "url" .Site.BaseURL)) -}}
<script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('{{- $script.RelPermalink -}}');
        });
    }
</script>